<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.cao.stock.persistence.OutStockMapper">

	<!-- cache / -->

	<select id="listAllOutStocks" parameterType="integer"  resultType="OutStock">
		SELECT
			i.id,i.order_id as orderId,i.create_date as createDate, i.modify_date as modifyDate, i.stock,i.department,i.staff, i.number,i.worth
		FROM 
			OUT_STOCK i
		WHERE 
		 	i.number>0
	</select>
	
	<select id="queryOutStockById" parameterType="integer" resultType="OutStock">
		SELECT
			i.id,i.order_id as orderId,i.create_date as createDate, i.modify_date as modifyDate, i.stock,i.department,i.staff, i.number, i.worth
		FROM
			OUT_STOCK i 
		Where 
			i.number>0 and i.ID = #{id} 
  	</select>


	<insert id="addOutStock" parameterType="OutStock"  useGeneratedKeys="true" keyProperty="id">
		INSERT INTO 
			OUT_STOCK(create_date,modify_date,order_id,stock,department,staff,number,worth)
		VALUES (#{createDate}, #{modifyDate}, #{orderId}, #{stock}, #{department}, #{staff}, #{number},  #{worth} ) 
  	</insert>


	<delete id="deleteOutStockById" parameterType="OutStock">
		DELETE FROM 
			OUT_STOCK
		WHERE 
			ID=#{id} 
  	</delete>


	<update id="modifyOutStockById" parameterType="OutStock">
		UPDATE 
			OUT_STOCK
		SET 
			order_id=#{orderId},
			modify_date=#{modifyDate},
			STOCK = #{stock},
			DEPARTMENT = #{department},
			STAFF =#{staff},
		    NUMBER=#{number},
		    WORTH=#{worth}
		WHERE 
			ID=#{id}
  	</update>
</mapper>